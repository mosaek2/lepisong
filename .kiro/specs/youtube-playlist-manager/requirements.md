# Requirements Document

## Introduction

유튜브 영상을 재생하는 웹페이지로, 회원들이 공유 대기열을 통해 함께 영상을 시청할 수 있는 시스템입니다. 사용자는 유튜브 영상을 검색하여 공유 대기열에 추가하거나, 개인 재생목록을 만들어 관리할 수 있습니다. 관리자의 유튜브 프리미엄 계정을 통해 광고 없는 재생을 제공합니다.

## Technology Stack

- **Frontend**: Angular 20.1.0, TailwindCSS
  - Client App: 일반 사용자용 웹 애플리케이션
  - Admin App: 관리자용 웹 애플리케이션
- **Backend**: NestJS, Prisma ORM
- **Database**: PostgreSQL
- **Monorepo**: NX Workspace
- **Real-time Communication**: WebSocket (Socket.io)
- **External APIs**: YouTube Data API v3

## Requirements

### Requirement 1

**User Story:** 회원으로서, 로그인하여 시스템에 접근하고 싶습니다. 그래야 개인화된 기능을 사용할 수 있습니다.

#### Acceptance Criteria

1. WHEN 사용자가 로그인 페이지에 접근 THEN 시스템은 로그인 폼을 표시해야 합니다
2. WHEN 사용자가 유효한 계정 정보로 로그인 THEN 시스템은 사용자를 메인 페이지로 리디렉션해야 합니다
3. WHEN 사용자가 잘못된 계정 정보로 로그인 시도 THEN 시스템은 오류 메시지를 표시해야 합니다
4. WHEN 로그인하지 않은 사용자가 보호된 페이지에 접근 THEN 시스템은 로그인 페이지로 리디렉션해야 합니다

### Requirement 2

**User Story:** 회원으로서, 유튜브 영상을 검색하고 싶습니다. 그래야 원하는 영상을 찾아서 대기열에 추가할 수 있습니다.

#### Acceptance Criteria

1. WHEN 사용자가 검색창에 키워드를 입력하고 검색 THEN 시스템은 유튜브 API를 통해 관련 영상 목록을 표시해야 합니다
2. WHEN 검색 결과가 표시 THEN 각 영상은 제목, 썸네일, 채널명, 재생시간을 포함해야 합니다
3. WHEN 검색어가 비어있거나 유효하지 않음 THEN 시스템은 적절한 안내 메시지를 표시해야 합니다
4. WHEN 검색 결과가 없음 THEN 시스템은 "검색 결과가 없습니다" 메시지를 표시해야 합니다

### Requirement 3

**User Story:** 회원으로서, 검색한 유튜브 영상을 공유 대기열에 추가하고 싶습니다. 그래야 다른 회원들과 함께 영상을 시청할 수 있습니다.

#### Acceptance Criteria

1. WHEN 사용자가 검색 결과에서 영상을 선택하고 "대기열에 추가" 클릭 THEN 시스템은 해당 영상을 공유 대기열 맨 마지막에 추가해야 합니다
2. WHEN 사용자가 "우선예약" 옵션을 선택하고 영상을 추가 THEN 시스템은 해당 영상을 현재 재생 중인 영상 다음 순서에 추가해야 합니다
3. WHEN 영상이 대기열에 추가됨 THEN 시스템은 모든 접속 중인 사용자에게 실시간으로 업데이트된 대기열을 표시해야 합니다
4. WHEN 이미 대기열에 있는 영상을 다시 추가하려고 시도 THEN 시스템은 중복 추가를 허용하되 별도의 항목으로 처리해야 합니다

### Requirement 4

**User Story:** 회원으로서, 나만의 개인 재생목록을 만들고 관리하고 싶습니다. 그래야 자주 듣는 영상들을 체계적으로 정리할 수 있습니다.

#### Acceptance Criteria

1. WHEN 사용자가 "새 재생목록 만들기" 클릭 THEN 시스템은 재생목록 이름 입력 폼을 표시해야 합니다
2. WHEN 사용자가 재생목록 이름을 입력하고 생성 THEN 시스템은 새로운 빈 재생목록을 생성해야 합니다
3. WHEN 사용자가 검색 결과에서 영상을 선택하고 "재생목록에 추가" 클릭 THEN 시스템은 사용자의 재생목록 목록을 표시해야 합니다
4. WHEN 사용자가 특정 재생목록을 선택 THEN 시스템은 해당 영상을 선택된 재생목록에 추가해야 합니다
5. WHEN 사용자가 재생목록을 조회 THEN 시스템은 재생목록 내 영상들을 순서대로 표시해야 합니다

### Requirement 5

**User Story:** 회원으로서, 내 개인 재생목록을 통째로 공유 대기열에 추가하고 싶습니다. 그래야 여러 영상을 한 번에 편리하게 추가할 수 있습니다.

#### Acceptance Criteria

1. WHEN 사용자가 재생목록 페이지에서 "대기열에 추가" 클릭 THEN 시스템은 재생목록의 모든 영상을 순서대로 공유 대기열에 추가해야 합니다
2. WHEN 사용자가 "우선예약으로 추가" 옵션을 선택 THEN 시스템은 재생목록의 영상들을 현재 재생 중인 영상 다음부터 순서대로 삽입해야 합니다
3. WHEN 재생목록이 비어있음 THEN 시스템은 "재생목록이 비어있습니다" 메시지를 표시해야 합니다
4. WHEN 재생목록 추가가 완료됨 THEN 시스템은 성공 메시지와 함께 업데이트된 대기열을 표시해야 합니다

### Requirement 6

**User Story:** 모든 회원으로서, 공유 대기열의 영상들을 실시간으로 확인하고 싶습니다. 그래야 현재 재생 상황과 다음에 재생될 영상들을 알 수 있습니다.

#### Acceptance Criteria

1. WHEN 사용자가 메인 페이지에 접근 THEN 시스템은 현재 공유 대기열을 실시간으로 표시해야 합니다
2. WHEN 다른 사용자가 대기열에 영상을 추가하거나 제거 THEN 시스템은 모든 접속 중인 사용자에게 즉시 변경사항을 반영해야 합니다
3. WHEN 현재 재생 중인 영상이 종료 THEN 시스템은 자동으로 다음 영상을 재생하고 대기열을 업데이트해야 합니다
4. WHEN 대기열이 비어있음 THEN 시스템은 "대기열이 비어있습니다" 메시지를 표시해야 합니다

### Requirement 7

**User Story:** 관리자로서, 관리자 앱에서 유튜브 프리미엄 계정을 등록하고 싶습니다. 그래야 광고 없는 영상 재생을 제공할 수 있습니다.

#### Acceptance Criteria

1. WHEN 관리자가 관리자 앱에 접근 THEN 시스템은 관리자 로그인 폼을 표시해야 합니다
2. WHEN 관리자가 관리자 앱에 로그인 THEN 시스템은 프리미엄 계정 관리 페이지를 표시해야 합니다
3. WHEN 관리자가 구글 로그인 버튼을 클릭 THEN 시스템은 구글 OAuth 인증 프로세스를 시작해야 합니다
4. WHEN 관리자가 구글 로그인을 완료 THEN 시스템은 해당 계정 정보를 프리미엄 재생 계정으로 등록해야 합니다
5. IF 등록된 계정이 유튜브 프리미엄이 아님 THEN 시스템은 경고 메시지를 표시해야 합니다

### Requirement 8

**User Story:** 모든 회원으로서, 광고 없는 유튜브 영상을 시청하고 싶습니다. 그래야 끊김 없는 시청 경험을 할 수 있습니다.

#### Acceptance Criteria

1. WHEN 영상이 재생 THEN 시스템은 등록된 프리미엄 계정을 통해 영상을 재생해야 합니다
2. WHEN 영상 재생 중 THEN 시스템은 광고를 표시하지 않아야 합니다
3. WHEN 프리미엄 계정이 등록되지 않음 THEN 시스템은 "관리자가 프리미엄 계정을 등록해야 합니다" 메시지를 표시해야 합니다
4. WHEN 영상 재생 중 오류 발생 THEN 시스템은 적절한 오류 메시지를 표시하고 다음 영상으로 넘어가야 합니다

### Requirement 9

**User Story:** 회원으로서, 대기열의 영상 순서를 조정하고 싶습니다. 그래야 재생 순서를 원하는 대로 변경할 수 있습니다.

#### Acceptance Criteria

1. WHEN 사용자가 대기열에서 영상을 드래그 앤 드롭 THEN 시스템은 영상의 순서를 변경해야 합니다
2. WHEN 영상 순서가 변경됨 THEN 시스템은 모든 접속 중인 사용자에게 실시간으로 변경사항을 반영해야 합니다
3. WHEN 현재 재생 중인 영상을 이동하려고 시도 THEN 시스템은 해당 작업을 허용하지 않아야 합니다
4. WHEN 사용자가 대기열에서 영상을 삭제 THEN 시스템은 해당 영상을 대기열에서 제거해야 합니다

### Requirement 10

**User Story:** 회원으로서, 영상 재생을 제어하고 싶습니다. 그래야 재생, 일시정지, 볼륨 조절 등을 할 수 있습니다.

#### Acceptance Criteria

1. WHEN 사용자가 재생 버튼을 클릭 THEN 시스템은 현재 영상을 재생해야 합니다
2. WHEN 사용자가 일시정지 버튼을 클릭 THEN 시스템은 현재 영상을 일시정지해야 합니다
3. WHEN 사용자가 볼륨을 조절 THEN 시스템은 모든 접속 중인 사용자에게 동일한 볼륨을 적용해야 합니다
4. WHEN 사용자가 다음 영상 버튼을 클릭 THEN 시스템은 현재 영상을 종료하고 다음 영상을 재생해야 합니다

### Requirement 11

**User Story:** 관리자로서, 관리자 앱에서 회원을 관리하고 싶습니다. 그래야 사용자 계정을 효율적으로 관리할 수 있습니다.

#### Acceptance Criteria

1. WHEN 관리자가 회원 관리 페이지에 접근 THEN 시스템은 모든 등록된 회원 목록을 표시해야 합니다
2. WHEN 관리자가 회원 정보를 조회 THEN 시스템은 회원의 상세 정보(가입일, 마지막 접속일, 활동 내역)를 표시해야 합니다
3. WHEN 관리자가 회원을 비활성화 THEN 시스템은 해당 회원의 로그인을 차단해야 합니다
4. WHEN 관리자가 회원을 활성화 THEN 시스템은 해당 회원의 로그인을 허용해야 합니다
5. WHEN 관리자가 회원을 삭제 THEN 시스템은 해당 회원의 모든 데이터를 삭제해야 합니다
6. WHEN 관리자가 회원 검색을 수행 THEN 시스템은 이름, 이메일 등으로 회원을 검색할 수 있어야 합니다